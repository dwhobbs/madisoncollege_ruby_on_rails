footer:@johnsonch :: Chris Johnson :: Ruby on Rails Development - Week 3
autoscale: true

# Ruby on Rails Development
## Week 3

---
# Chapters 1 and 2

---
## CLI

* Let's play around with the terminal and talk about some handy commands

^ `ls`, `grep`, `history`, `ps aux`, and aliases

---
# Git

---
## Configuring Git
* See what is in your git config file ```cat ~/.gitconfig```
```bash
$ git config --global user.name "Your Name"
$ git config --global user.email your.email@example.com
```
* ```cat ~/.gitconfig```

---
# Git Activity
Go to [https://try.github.io/levels/1/challenges/1](https://try.github.io/levels/1/challenges/1) and follow the tutorial


---
# Bitbucket
* Creating a repository
* Inviting contributors

---


# Bitbucket
## Pull Request demo

First make sure you can get to the repository out on bitbucket, I sent everyone
an email to their school address. That doesn't mean that you need to have signed
up with your school email it just means that's where you get the invite link to
this repository.

The web address should be: [https://bitbucket.org/johnsonch/git_demo_fall_2017](https://bitbucket.org/johnsonch/git_demo_fall_2017)

You'll want to open up your development environment of choice then and clone the
repository with:

```
$ git clone git@bitbucket.org:johnsonch/git_demo_fall_2017.git
```

Then create a branch for yourself:

```
$ git checkout -b <USERNAME>
```

Modify `humans.txt` to include your name

`$ git status`
`$ git add -A` <!-- Tell story about the git add . fiasco of 2012 -->
`$ git commit -m 'insert your commit message here'`
`$ git push`

Then go out to bitbucket and find the [repository](https://bitbucket.org/johnsonch/git_demo_fall_2017) again and find your branch

![](https://dl.dropboxusercontent.com/s/9ffivhdacqc8hjk/2017-01-31%20at%2010.00%20PM.png)

![](https://dl.dropboxusercontent.com/s/9zm06luulwluiz9/2017-01-31%20at%2010.01%20PM.png)

For most projects you'll want to merge your branch into master, some teams do it
differently but a common practice is to branch off of and merge into master:

![](https://dl.dropboxusercontent.com/s/ydap4t275gl6y1c/2017-01-31%20at%2010.01%20PM%20%281%29.png)


Fill out all the information for the pull request, it will populate some of the
boxes for you based on your commits. However you can modify the title and description
to be more accurate. If you are working on an Open Source project you will probably
need to be more specific than in class or in an work setting.

![](https://dl.dropboxusercontent.com/s/ia0roooyhfh6xlu/2017-01-31%20at%2010.02%20PM.png)

Next go to the Pull Requests page [https://bitbucket.org/johnsonch/hello_app_spring_2017/pull-requests/](https://bitbucket.org/johnsonch/hello_app_spring_2017/pull-requests/)

We'll walk over this UI in class, I can't do much outside of class by myself.

---

---
# MVC

---
![fit](https://dl.dropboxusercontent.com/s/gkvmxepquu061xc/2014-09-06%20at%2012.48%20PM.png?dl=0)

---
## Model
* Responsible for maintaining the state of the application
* Enforcing business rules

---
## View
* User interface

---
## Controller
* Orchestrate the application (Traffic Cop)

---
# What is REST?
> Representational State Transfer

* Simple set of Verbs that work on each Noun of an application.

---
# What is a 'resource'?
* Simply a controller
* Scaffolding creates a 1 to 1 relationship to model
* Does not need to reflect a model
* Defaults to REST actions

---
# What is 'scaffolding'
* Generated by the ```scaffold``` command
* Generates code based on the attribute notation ```name:string```
* Creates model, view, controller, helper, route, migration and tests
* Has default basic code

---
# Scaffolding

```bash
$ bundle exec rails g scaffold title:string body:text author_id:integer viewable:boolean
```

---
# Scaffolding - Do I need to use that?
^ No you can either use other generators or hand create the files. Scaffolding
generates more than you need most of the time, but it can be a useful learning
tool.

---
# Routes

---
# Example Route

```ruby
DemoApp::Application.routes.draw do
  resources :users
end
```

---
# $ rake routes

```
Prefix    Verb   URI Pattern                    Controller#Action
users     GET    /users(.:format)               users#index
          POST   /users(.:format)               users#create
new_user  GET    /users/new(.:format)           users#new
edit_user GET    /users/:id/edit(.:format)      users#edit
users     GET    /users/:id(.:format)           users#show
          PATCH  /users/:id(.:format)           users#update
          PUT    /users/:id(.:format)           users#update
          DELETE /users/:id(.:format)           users#destroy
```
^Maps to CRUD actions (index,show,new,create,edit,update,destroy)

---
## PUT vs PATCH
* PATCH is like PUT however PUT works on the full dataset where as PATCH only requires the delta.
* PATCH was defined in 1995 and adopted into Rails in version 4.0

---
## Sample update request
```
started PATCH "/users/1" for 50.50.89.28 at 2014-12-26 12:22:13 +0000
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dWzrsueQQJPL9PxuZnM8NnQYzrtC34PpV6sbK8bd0oaxzLHlgK0224q+OVWrDF
  /HApdIAZGy2ywGlzQ0oywpAQ==", "user"=>{"name"=>"chris", "email"=>"cgjohnson1@madisoncollege.edu"}, "commit"=>"Update User", "id"=>"1"}
  User Load (0.2ms)  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
   (0.1ms)  begin transaction
  SQL (0.4ms)  UPDATE "users" SET "name" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "chris"],
  ["updated_at", "2014-12-26 12:22:13.298574"], ["id", 1]]
   (29.2ms)  commit transaction
Redirected to http://grandeur-blackwater-bay-69-123648.use1.nitrousbox.com:3000/users/1
Completed 302 Found in 36ms (ActiveRecord: 29.8ms)
```

---
# Turbolinks

![fit inline](http://media.railscasts.com/assets/episodes/videos/390-turbolinks.mp4)

---
# Modeling madlibs

* [Game information](https://en.wikipedia.org/wiki/Mad_Libs#Format)

```
Enter a noun: dog
Enter a verb: walk
Enter an adjective: blue
Enter an adverb: quickly
Do you walk your blue dog quickly? That's hilarious!
```

^ On the white Board, stories, turns (noun, verb, adjective, adverb, generated story)

---
# Create a new app

```
$ rails new mad_lib
$ cd mad_lib
$ bundle exec rails g scaffold ......
```

^ In class collaboration to generate the app, then migrate the database and segway into talking about Rake

---
# Rake
* Ruby make
* Rake is a Make-like program implemented in Ruby. Tasks and dependencies are specified in standard Ruby syntax.

---
## Protip
```bash
$ bundle exec rake -vT
```

---
## IRB

Interactive Ruby Shell (IRB or irb) is a REPL for ruby. REPL stands for Read–eval–print loop.

```bash
$ irb
```

---
## Rails Console
* Let's you try out code against
* ```bash
$ bundle exec rails console
```

---
# Rails Class Inheritance Hierarchies

[https://www.railstutorial.org/book/toy_app#sec-inheritance_hierarchies](https://www.railstutorial.org/book/toy_app#sec-inheritance_hierarchies)

---
# Gemfile and Bundler
<!--TODO-->

---
# Finishing our Mad lib game and working through some syntax


---
# Deploying

---
#Heroku vs VPS

---
## Heroku
Is managed by Heroku so you don't have to patch or configure, but costs $$.

---
## Heroku Deployment Process

### Step 1:
```bash
$ heroku create my-sweet-app
```
### Step 2:
```bash
$ git push heroku master
```
### Step 3: Profit!

---
# Exit Ticket

Instructor question
> If you could travel to anywhere in space and back again, think Magic School Bus, where would you go and why?

* [http://exitticket.johnsonch.com](http://exitticket.johnsonch.com)
